# condition0

condition0 is a versatile utility for polling asynchronous or synchronous conditions in JavaScript. It repeatedly invokes a callback function until the callback returns true or the maximum number of attempts is reached. Whether the function succeeds or fails, condition0 dispatches custom JavaScript events that can be listened to for further actions. This makes it particularly useful for scenarios where you need to monitor a condition that may change over time but have no direct way of knowing when it will be satisfied.
## Installation

```bash
npm install condition0
```
## Basic Example

```javascript
import { condition0 } from "condition0";

const aCallback = () => {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve(true);
        }, 1500);
    });
};

// Try a maximum of 10 times, 200ms in between attempts.
condition0(aCallback, { maxAttempts: 10, timeOut: 200, isAsync: true });

document.addEventListener("condition0_success", (event) => {
    console.log("Condition Success!", event.detail);
});

document.addEventListener("condition0_failure", (event) => {
    console.log("Condition Failure!", event.detail);
});
```

## Polling Example
When you need to monitor a condition that may change due to external factors, such as waiting for a user to log in:
```javascript
import { authHelper } from "authHelper";
import { condition0 } from "condition0";

// Poll the login state 5 times, 300ms apart.
condition0(() => authHelper.getState().isLoggedIn(), { maxAttempts: 5, timeOut: 300 });

document.addEventListener("condition0_success", (event) => {
    console.log("Condition Success!", event.detail);
});

document.addEventListener("condition0_failure", (event) => {
    console.log("Condition Failure!", event.detail);
});
```
## Notify Before and After Each Attempt
You can use the notifyBeforeEach and notifyAfterEach options to trigger events before and after each attempt. This can be useful for logging or updating the UI.

```javascript
import { condition0 } from "condition0";

const aCallback = () => {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve(Math.random() > 0.7); // Simulating a condition that has a chance to be true
        }, 500);
    });
};

const options = {
    maxAttempts: 10,
    timeOut: 500,
    isAsync: true,
    notifyBeforeEach: true,
    notifyAfterEach: true
};

// Try a maximum of 10 times, 500ms in between attempts.
condition0(aCallback, options);

document.addEventListener("condition0_success", (event) => {
    console.log("Condition Success!", event.detail);
});

document.addEventListener("condition0_failure", (event) => {
    console.log("Condition Failure!", event.detail);
});

document.addEventListener("condition0_beforeEach", (event) => {
    console.log(`Before attempt ${event.detail.iteration}`);
});

document.addEventListener("condition0_afterEach", (event) => {
    console.log(`After attempt ${event.detail.iteration} - Result: ${event.detail.result}`);
});
```

## Options
This options object allows you to customize the polling behavior.
```javascript
const options = {
    maxAttempts: 10,       // Maximum number of attempts
    timeOut: 100,          // Delay between attempts (in milliseconds)
    successEvent: "condition0_success", // Event name for success
    failEvent: "condition0_failure",    // Event name for failure
    isAsync: false,        // Whether the callback is asynchronous
    notifyBeforeEach: false, // Trigger an event before each attempt
    notifyAfterEach: false  // Trigger an event after each attempt
};

const callback = () => { /* your condition logic */ };

condition0(callback, options);
// Add your event listeners to handle the custom events
```